
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<title>Season Two</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Django e-booklet">
<meta name="keywords" content="django, django learning">
<meta name="author" content="Mahdi Rezaie, Ali Ebrahimian">
<link rel="icon" href="../Images/favicon.ico" type="image/ico">

<link rel="stylesheet" type="text/css" href="https://virapy.github.io/assets/CSS/seasons-style.css">
<link rel="stylesheet" type="text/css" href="https://virapy.github.io/assets/CSS/Footer-style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<main>
    <div class="container">
        <div class="content">
            <h2>فصل دوم: اپلیکیشن بلاگ(بخش اول)</h2><div class="toc"><h3>فهرست مطالب</h3><ul>
<li><a href="#skht-p-app-bry-prwjh">ساخت اپ (app) برای پروژه</a></li>
<li><a href="#dstwr-makemigrations-migrate-w-sqlmigrate">دستور «makemigrations» ، «migrate» و «sqlmigrate»</a></li>
<li><a href="#yjd-pnl-dmyn">ایجاد پنل ادمین</a></li>
<li><a href="#shkhsy-szy-pnl-dmyn">شخصی سازی پنل ادمین</a></li>
<li><a href="#khr-b-khwyry-st-h-crud-orm">کار با کوئری ست ها(CRUD, ORM)</a></li>
<li><a href="#skht-manager-sfrshy-bry-mdl">ساخت manager سفارشی برای مدل</a></li>
<li><a href="#yjd-url-hy-plykhyshn-blg">ایجاد URL های اپلیکیشن بلاگ</a></li>
<li><a href="#yjd-view-hy-plykhyshn-blg">ایجاد view های اپلیکیشن بلاگ</a></li>
<li><a href="#yjd-base-template">ایجاد base template</a></li>
<li><a href="#yjd-template-hy-lyst-w-jzyyt">ایجاد template های لیست و جزئیات</a></li>
</ul></div>
<h3 id="skht-p-app-bry-prwjh">ساخت اپ (app) برای پروژه</h3>
<p>برای توسعه و مدیریت بهتر بخش های مختلف پروژه بکار میرود، مثلا بخش های مختلف سایت مثله مقالات ، فروشگاه و... هر کدام در یک اپ ساخته میشوند تا هم پروژه ساده تر باشه و هم مدیریت سریعتر و راحت تر.</p>
<h4>ایجاد اپلیکیشن با دستور</h4>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">startapp</span> <span class="n">app_name</span>
</pre></div>

<h4>معرفی اپلیکیشن به پروژه جنگو</h4>
<p>توی تنظیمات پروژه، بخش «INSTALLED_APPS» اپلیکیشن خود را معرفی می کنیم.</p>
<p><code>project directory name/settings.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">INESTALLED_APPS</span><span class="o">=</span><span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;&lt;app_name&gt;.apps.&lt;App_name&gt;Config&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>

<p>مثال: اسم اپلیکیشن=blog</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">INESTALLED_APPS</span><span class="o">=</span><span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;blog.apps.BlogConfig&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>

<hr />
<h4>ایجاد مدل Post</h4>
<p>جداول در دیتابیس : برای ایجاد جدول و (ستون ها=column) در دیتابیس از «model» در جنگو استفاده میکنیم.</p>
<p>برای ایجاد هر جدول در دیتابیس، توی اسکریپت «models.py» یک کلاس ایجاد میکنیم (این کلاس ها همان جداول ما در دیتابیس هستند)
  برای ایجاد هر ستون از جدول توی کلاس مربوطه یک متغیر (class attribute) ایجاد کرده و نوع فیلد آنرا مشخص میکنیم
  هر کدام از این کلاس ها باید از (models.Model) ارث بری کنند.</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">TableName</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># fields and ...</span>
</pre></div>

<p>برای نوشتن فیلد های هر جدول به صورت زیر عمل میکنیم:</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">variable</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">type</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">field</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</pre></div>

<p>مثال</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
</pre></div>

<p>برای متن های طولانی تر از «TextField» بجای «CharField» استفاده میکنیم.
هر صفحه ای از وبسایت دارای «url» خاص خودشه آن میشه slug.(قسمت اصلی آدرس بعد از نام دامنه است)
برای زمان و تاریخ از فیلد «DateTimeField» استفاده میکنیم.</p>
<p>مرتب سازی آبجکت ها در جدول:</p>
<p>داخل بدنه کلاس (همان جدول) یک کلاس دیگه بنام «Meta» ایجاد میکنیم</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">TableName</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># ...</span>
</pre></div>

<p>حالا داخل بدنه کلاس «Meta» از متغیرهای «ordering» و  «indexes» استفاده میکنیم.</p>
<p>توی لیست «ordering» مشخص میکنیم مرتب سازی بر اساس چه فیلد هایی باشد.
مثلا مرتب سازی براساس زمان انتشار پست (فیلدی که توی کلاس برایش مشخص کرده ایم)
در حالت عادی بر اساس قدیمی تر ها مرتب میکنه واسه همین از (-) قبل از اسم فیلد استفاده میکنیم این طوری براساس جدیدترین مرتب میکنه.
ordering = ['-publish']</p>
<p>indexing: راهی برای جستجوی سریعتر و بهینه تر، بین داده هست.
توی لیست «indexes» مشخص میکنیم جستجو براساس کدام فیلدها انجام شود
بدین ترتیب براساس آن فیلدها؛ دیتا ها را جستجو کرده و با «ordering» مرتبشون میکنه.
indexes = [models.Index(fields=['-publish'])]</p>
<hr />
<p>الآن برای درک بیشتر میخوایم یک جدول با نام «Post» و یکسری فیلد ها مثل (عنوان، توضیحات،تاریخ انتشار و... )ایجاد کنیم تا توضیحات بالا را در مثال ببینید.</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="c1"># title of the post</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
    <span class="c1"># post description</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="c1"># The main part of the address is after the domain name</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

    <span class="c1"># Date</span>
    <span class="c1"># post publish date</span>
    <span class="n">publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="c1"># post creation date</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># post update date</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># To sort the table</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Sort by</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">]</span> <span class="c1"># (-) is used to reverse the sort. =&gt; sort by latest post</span>
        <span class="c1"># Indexing by</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">])</span>
            <span class="p">]</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</pre></div>

<p>ایجاد فیلدهایی که از بین گزینه ها یک مورد را انتخاب میکنیم مثله انتخاب شهر تعیین جنسیت و...
راهکار های متفاوتی داره اینجا از کلاس استفاده میکنیم</p>
<p>مثل کلاس Meta که داخل کلاس اصلی تعریفش کردیم یک کلاس هم برای این حالت انتخابی ایجاد میکنیم.
این کلاس از (models.TextChoices) ارث بری میکنه.</p>
<p>حالا داخل بدنه این کلاس تعدادی متغیر(class attribute) برای گزینه های مدنظر ایجاد میکنیم این متغیر ها رو با حروف بزرگ می نویسیم.</p>
<p>حالا برای این متغیر ها دو مقدار مشخص میکنیم</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">TableName</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Name</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
        <span class="n">names</span> <span class="o">=</span> <span class="s1">&#39;values&#39;</span><span class="p">,</span> <span class="s1">&#39;labels&#39;</span>
        <span class="c1"># ...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># ...</span>
</pre></div>

<p>name = اسم متغیر برای گزینه
value = اسمی که توی دیتابیس ذخیره میشه(اولین مقدار)
label = اسمی که به کاربر روی گزینه نمایش داده میشه(دومین مقدار)</p>
<p>تمامی این اسم ها به دلخواه هستند. (در اینجا مثال در مورد وضعیت پست نوشته شده میباشد).</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
    <span class="n">DRAFT</span> <span class="o">=</span> <span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;Draft&#39;</span>
    <span class="n">PUBLISHED</span> <span class="o">=</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span>
    <span class="n">REJECTED</span> <span class="o">=</span> <span class="s1">&#39;RJ&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span>
</pre></div>

<p>حالا باید فیلد این حالت انتخابی(گزینه ای) را ایجاد کنیم تا توی دیتابیس بتوان آنرا نمایش داد.(این فیلد از این کلاس بالا استفاده میکنه.)</p>
<p>حالا داخل کلاس اصلی خود (در مثال کلاس Post) یک متغیر برای تعریف فیلد ایجاد میکنیم و نوع آنرا (models.CharField) مشخص میکنیم
حال برایش آرگومان «choices=class-name.choices» را مشخص میکنیم</p>
<p>آرگومان «default» مقدار پیشفرض این گزینه را مشخص میکنه.</p>
<p>آرگومان «max_length» برای مقدار اول متغیر ها در کلاس (در مثال ما کلاس «Status») میباشد چون آنها در دیتابیس ذخیره میشوند.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">)</span>
</pre></div>

<p>خب بریم همه این توضیحات را در کد ببینیم(کلاس و فیلد «status»)</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
        <span class="n">DRAFT</span> <span class="o">=</span> <span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;Draft&#39;</span>
        <span class="n">PUBLISHED</span> <span class="o">=</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span>
        <span class="n">REJECTED</span> <span class="o">=</span> <span class="s1">&#39;RJ&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span>

    <span class="c1"># field for the selected mode (using the top class)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">)</span>

    <span class="c1"># title of the post</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
    <span class="c1"># post description</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="c1"># The main part of the address is after the domain name</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

    <span class="c1"># Date</span>
    <span class="c1"># post publish date</span>
    <span class="n">publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="c1"># post creation date</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># post update date</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># To sort the table</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Sort by</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">]</span> <span class="c1"># (-) is used to reverse the sort. =&gt; sort by latest post</span>
        <span class="c1"># Indexing by</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">])</span>
            <span class="p">]</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</pre></div>

<p>کلاس (TextChoices) که از آن ارث بری کردیم یکسری اتریبیوت دارد</p>
<p>اتریبیوت choices: میاد محتویات هر متغیر را داخل یک تاپل قرار داده و حالا همه ی آنها را به صورت لیست نمایش میده</p>
<p>اتریبیوت names: اسامی تمام متغیر ها را برمیگرداند</p>
<p>اتریبیوت values: اسامی که قراره توی دیتابیس ذخیره بشن رو نمایش میده</p>
<p>اتریبیوت labels: اسامی که به کاربر نمایش داده میشه را برمیگرداند</p>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">shell</span>
<span class="p">&gt;&gt;&gt;</span><span class="n">from</span> <span class="n">blog</span><span class="p">.</span><span class="n">models</span> <span class="n">import</span> <span class="n">Post</span>

<span class="p">&gt;&gt;&gt;</span><span class="n">Post</span><span class="p">.</span><span class="n">Status</span><span class="p">.</span><span class="n">choices</span>
<span class="p">[(</span><span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;Draft&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;RJ&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span><span class="p">)]</span>

<span class="p">&gt;&gt;&gt;</span><span class="n">Post</span><span class="p">.</span><span class="n">Status</span><span class="p">.</span><span class="n">names</span>
<span class="p">[</span><span class="s1">&#39;DRAFT&#39;</span><span class="p">,</span> <span class="s1">&#39;PUBLISHED&#39;</span><span class="p">,</span> <span class="s1">&#39;REJECTED&#39;</span><span class="p">]</span>

<span class="p">&gt;&gt;&gt;</span><span class="n">Post</span><span class="p">.</span><span class="n">Status</span><span class="p">.</span><span class="n">values</span>
<span class="p">[</span><span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;RJ&#39;</span><span class="p">]</span>

<span class="p">&gt;&gt;&gt;</span><span class="n">Post</span><span class="p">.</span><span class="n">Status</span><span class="p">.</span><span class="n">labels</span>
<span class="p">[</span><span class="s1">&#39;Draft&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<h4>استفاده از مدل User (مدل پیشفرض جنگو)</h4>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
</pre></div>

<hr />
<h4>روابط بین جداول</h4>
<ol>
<li>Many To One(ForeignKey)</li>
<li>One To One</li>
<li>Many To Many</li>
</ol>
<hr />
<p>در اینجا رابطه «Many To One(ForeignKey)» توضیح داده میشه و مابقی در فصل های بعد.</p>
<p>ارتباط بین یک کاربر با پست هایش از نوع «Many To One(ForeignKey)» میباشد
توضیح: یک کاربر میتونه چند پست داشته باشه ولی هر پست فقط یک کاربر(نویسنده) داره (یک کاربر، چند پست)</p>
<p>فیلد «Many To One(ForeignKey)» توی جدولی نوشته میشه که چندتایی باشه با توجه به مثال بالا توی جدول «Post» نوشته میشه نه جدول «User»</p>
<hr />
<p>خب میخوایم فیلدی برای ارتباط کاربر(نویسنده) با پست ایجاد کنیم/ این فیلد از نوع «Many To One(ForeignKey)» خواهد بود.</p>
<p>برای نوشتن فیلد «Many To One(ForeignKey)» به صورت زیر عمل میکنیم:</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">field_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Connected</span><span class="o">-</span><span class="n">model</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>

<p>مثال: فیلد «author» توی مدل «Post»</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;user_posts&#39;</span><span class="p">)</span>
</pre></div>

<p>اولین مورد از فیلد (foreignkey) ، مدلی است که به آن متصل میشویم</p>
<p>آرگومان (on_delete): نوع حذف شدن را مشخص میکند («CASCADE» میگه اگه کاربر حذف شد پست هایش هم حذف شوند)</p>
<p>آرگومان (related_name): مدل متصل شده از این طریق میتواند با این مدل فعلی ارتباط بگیرد.</p>
<p>مدل متصل شده (یعنی «User») از طریق «related_name» با این مدل «Post» ارتباط میگیرد.</p>
<p>خب حالا این فیلد را در کد مدل خود ببینیم:</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
        <span class="n">DRAFT</span> <span class="o">=</span> <span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;Draft&#39;</span>
        <span class="n">PUBLISHED</span> <span class="o">=</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span>
        <span class="n">REJECTED</span> <span class="o">=</span> <span class="s1">&#39;RJ&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span>

    <span class="c1"># field for the selected mode (using the top class)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">)</span>

    <span class="c1"># Relational field(Many To One)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;user_posts&quot;</span><span class="p">)</span>

    <span class="c1"># title of the post</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
    <span class="c1"># post description</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="c1"># The main part of the address is after the domain name</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

    <span class="c1"># Date</span>
    <span class="c1"># post publish date</span>
    <span class="n">publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="c1"># post creation date</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># post update date</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># To sort the table</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Sort by</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">]</span> <span class="c1"># (-) is used to reverse the sort. =&gt; sort by latest post</span>
        <span class="c1"># Indexing by</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">])</span>
            <span class="p">]</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</pre></div>

<hr />
<h3 id="dstwr-makemigrations-migrate-w-sqlmigrate">دستور «makemigrations» ، «migrate» و «sqlmigrate»</h3>
<p>برای اینکه جداول توی دیتابیس ذخیره بشن از «makemigrations» و «migrate» استفاده میکنیم</p>
<p>دستور migrate : مسئول اعمال و عدم اعمال مهاجرت(migration) است.
دستور makemigrations : مسئول ایجاد مهاجرت(migration) های جدید بر اساس تغییراتی است که در مدل های خود ایجاد کرده اید.
دستور sqlmigrate، : دستورات SQL را برای یک مهاجرت(migration) نمایش می دهد.</p>
<p>با استفاده از دستور «makemigrations» چنانچه تغییری توی مدل اعمال شده باشد میاد و یک (migration) حاوی تغییرات جهت اعمال روی دیتابیس ایجاد میکند با این حال تغییری روی دیتابیس نمیدهد / هنگامی که از دستور «migrate» استفاده کنیم تغییرات روی دیتابیس اعمال میشن.</p>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">makemigrations</span> <span class="n">app_name</span><span class="p">(</span><span class="n">الزامی</span> <span class="n">نیست</span><span class="err">؛</span> <span class="n">مگر</span> <span class="n">زمانی</span> <span class="n">که</span> <span class="n">چند</span> <span class="n">اپ</span> <span class="n">داشته</span> <span class="n">باشیم</span><span class="p">)</span>
<span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">migrate</span> <span class="n">app_name</span><span class="p">(</span><span class="n">الزامی</span> <span class="n">نیست</span><span class="err">؛</span> <span class="n">مگر</span> <span class="n">زمانی</span> <span class="n">که</span> <span class="n">چند</span> <span class="n">اپ</span> <span class="n">داشته</span> <span class="n">باشیم</span><span class="p">)</span>
</pre></div>

<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">sqlmigrate</span> <span class="n">app_name</span> <span class="s1">&#39;migration code&#39;</span>
</pre></div>

<p>مثال</p>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">sqlmigrate</span> <span class="n">blog</span> <span class="n">0001</span>
</pre></div>

<hr />
<h3 id="yjd-pnl-dmyn">ایجاد پنل ادمین</h3>
<p>جنگو برای پنل ادمین ساختار پیشفرض دارد/ برای ایجاد پنل ادمین از دستور زیر استفاده میکنیم.</p>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">createsuperuser</span>
</pre></div>

<p>پس از زدن Enter از ما («username», «email», «password») درخواست میکنه</p>
<p>رمز نمایش داده نمیشه پس حواست باشه چی میزنی</p>
<p><code>Terminal:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">powershell</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">createsuperuser</span>

<span class="n">Username</span> <span class="p">(</span><span class="n">leave</span> <span class="n">blank</span> <span class="n">to</span> <span class="n">use</span> <span class="s1">&#39;system name&#39;</span><span class="p">):</span> <span class="n">your_username</span> <span class="n">or</span> <span class="n">blank</span>
<span class="n">Email</span> <span class="n">address</span><span class="p">:</span> <span class="n">your_email</span> <span class="n">or</span> <span class="n">blank</span>
<span class="n">Password</span><span class="p">:</span> <span class="n">your_password</span>
<span class="n">Password</span> <span class="p">(</span><span class="n">again</span><span class="p">):</span> <span class="n">your_password</span>
</pre></div>

<p>با این «username» و «password» میتونیم وارد پنل ادمین بشیم.
پس از run کردن پروژه انتهای «url» عبارت (/admin/) را نوشته و Enter را میزنیم</p>
<p>میخواهیم جداولی که در «model» ایجاد کردیم رو در پنل ادمین نمایش بدهیم.</p>
<p><code>app directory/admin.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</pre></div>

<p>توی پنل ادمین برای هر مدل، چیزی که توی (<strong>str</strong> method) مشخص کرده ایم را نمایش میدهد</p>
<hr />
<h3 id="shkhsy-szy-pnl-dmyn">شخصی سازی پنل ادمین</h3>
<p>برای شخصی سازی پنل ادمین جهت نمایش جداول (models) در پنل، آن طور که میخواهیم به صورت زیر عمل میکنیم</p>
<p>این کار را با استفاده از یک دکوراتور و یک کلاس انجام میدهیم ، داخل کلاس شخصی سازی را انجام میدهیم (این کلاس باید از (admin.ModelAdmin) ارث بری بکنه)</p>
<p><code>app directory/admin.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="o">*</span>


<span class="nd">@admin</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Model_NameAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>

<h4>شخصی سازی پنل =&gt; داخل کلاس «Model_Name Admin»</h4>
<p>فیلد (list_display): با استفاده از آن مشخص میکنیم کدام فیلد های مدل را در پنل نمایش دهد (به همین ترتیبی که می نویسیم داخل پنل نمایش داده میشوند.)</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (ordering): با استفاده از آن نحوه مرتب سازی داده های مدل خود را مشخص میکنیم</p>
<p>میتوان از یک فیلد و یا چند فیلد جهت مرتب سازی استفاده کرد / هر فیلدی که خواستیم</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">,</span> <span class="s1">&#39;-author&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (list_filter): قابلیت فیلتر کردن داده های مدل را براساس فیلدهایی که مشخص می کنیم رو بهمون میده مثلا پست هایی که وضعیت رد شده دارند را نمایش بدهیم.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">list_filter</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (search_fields): قابلیت سرچ (جستجو) برای داده های مدل را براساس فیلدهایی که برایش مشخص میکنیم برایمان فعال میکند.  </p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (raw_id_fields): برای فیلد های رابطه ای مثل «foreignKey» مثله author کاربرد داره(توضیح را با مثال کاربر پیش میبریم ولی هر فیلدی که از نوع رابطه ای باشد قابل استفاده هست)</p>
<p>وقتی از «raw_id_fields» استفاده کنیم توی پنل ادمین بجای اینکه یک دراپ باکس جهت انتخاب کاربر وجود داشته باشد، یک گزینه سرچ ایجاد میشه که با کلیک روی آن یک صفحه جدید باز شده و حالا کاربر مدنظر را انتخاب میکنیم(این حالت زمانی که تعداد کاربران زیاد باشد نقش چشمگیری دارد)</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (list_editable): قابلیت ویرایش فیلد های مدل در صفحه پنل ادمین را فراهم میکند</p>
<p>با استفاده از «list_editable» فیلد هایی که برایش مشخص میکنیم در همان صفحه که داده های دیگر هم وجود دارند میتوان آن فیلد ها را ویرایش کرد.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">list_editable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<p>فیلد (date_hierarchy): با این قابلیت، دقیقاً زیر کادر جستجو، برامون لیستی از زمانهای موجود (براساس آن فیلد زمانی که برایش مشخص میکنیم) قرار میگیره و میتونیم مطالب رو بر اساس بازه های زمانی مختلف مشاهده کنیم(مثلا پست های منتشر شده در ماه may از سال 2023 را نمایش دهیم).</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s1">&#39;publish&#39;</span>
</pre></div>

<hr />
<p>فیلد (prepopulated_fields): بااستفاده از آن میتوان مشخص کرد که یکی از فیلدهای مدل اتومات براساس فیلدی دیگر پر شود.(وقتی که میخواهیم یکی از فیلدهای مدل براساس فیلدی دیگر به صورت اتومات پر شود)</p>
<p>مثلا در کد زیر فیلد «slug» پست هایمان براساس متن «title» اتوماتیک پر شود</p>
<p>به این ترتیب وقتی ما در پنل ادمین درحال نوشتن فیلد «title» هستیم فیلد «slug» اتومات براساس «title» ما نوشته میشود.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]}</span>
</pre></div>

<hr />
<p>حالا بریم تمام این موارد را در کد فایل «admin.py» ببینیم:</p>
<p><code>app directory/admin.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="o">*</span>


<span class="nd">@admin</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Post</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">PostAdmin</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">ModelAdmin</span><span class="p">):</span>
    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">]</span>
    <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">,</span> <span class="s1">&#39;-author&#39;</span><span class="p">]</span>
    <span class="n">list_filter</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;publish&#39;</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">]</span>
    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span>
    <span class="n">raw_id_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]</span>
    <span class="n">date_hierarchy</span> <span class="o">=</span> <span class="s1">&#39;publish&#39;</span>
    <span class="n">prepopulated_fields</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;slug&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]}</span>
    <span class="n">list_editable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span>

    <span class="c1"># برای تغییر لینک ورود به صفحه ی ویرایش اطلاعات بکار میرود</span>
    <span class="c1"># به صورت عادی اولین مورد یعنی (فیلد نویسنده) لینک هست ولی حالا (فیلد عنوان) را لینک داده ایم</span>
    <span class="n">list_display_links</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
</pre></div>

<hr />
<h3 id="khr-b-khwyry-st-h-crud-orm">کار با کوئری ست ها(CRUD, ORM)</h3>
<h4>CRUD: Create - Read - Update - Delete</h4>
<p>اینها چهار عملکرد اصلی برای کار با پایگاه داده هستند.</p>
<p>مثلا یک داده به جدول اضافه کنیم،
یک یا چند مورد از داده ها انتخاب کنیم(از روی دیتابیس بخوانیم)
تغییراتی توی داده ایجاد کنیم
ویا داده هایی را از دیتابیس حذف کنیم.</p>
<p>این عملکردها را با ORM» انجام میدهیم.</p>
<hr />
<h4>ORM : Object Relational Mapping</h4>
<p>توی «django» ما به کمک «ORM» میتوانیم با دیتابیس تعامل داشته باشیم («ORM» پلی است برای برقراری ارتباط بین دیتابیس و ساختار کد ما)</p>
<p>این سیستم با توجه به دستوراتی که ما توی پایتون اعمال میکنیم اتوماتیک دستورات را به ساختار «SQL» تبدیل میکند.</p>
<p>برای نمایش دستورات و خروجی آنها در یکجا از «shell» استفاده میکنیم.</p>
<p><code>Terminal</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">shell</span>
</pre></div>

<p>حالا دو مدل Post و User خود را ایمپورت میکنیم</p>
<p><code>Shell app_name='blog'</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>from<span class="w"> </span>django.contrib.auth.models<span class="w"> </span>import<span class="w"> </span>User
&gt;&gt;&gt;<span class="w"> </span>from<span class="w"> </span>blog.models<span class="w"> </span>import<span class="w"> </span>Post
</pre></div>

<p>دستورات در ادامه همین خط کد ایمپورت کردن نوشته میشوند ولی برای توضیحات، هر بخش را برایتان جداگانه مینویسیم</p>
<hr />
<p>متد <span class="en-text">all()</span> : خواندن تمامی داده های یک جدول از دیتابیس</p>
<p>خروجی آن یک (کوئری ست)، شامل تمامی داده های آن جدول میباشد.(ساختار: &lt;QuerySet [&lt;Model_name: value1&gt;, &lt;Model_name: value2&gt;, ...]&gt;)</p>
<blockquote>
<p><strong>value</strong> همان چیزی است که متد __str__ در مدل آن را return میکند.</p>
</blockquote>
<p><strong>queryset:</strong> مجموعه ای از داده های یک جدول در دیتابیس</p>
<p>دو «user» و یک «post» در پنل ادمین ساخته شده است.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>Python&gt;<span class="o">]</span>&gt;
</pre></div>

<hr />
<p>یک کلاس مدل (مثلا مدل Post) ، یک جدول از دیتابیس را نشان می دهد و یک نمونه (instance) از آن کلاس یک رکورد از آن جدول را نشان میدهد.</p>
<p>ایجاد کاربر و ذخیره آن در دیتابیس:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">user1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Reza26&#39;</span>,<span class="w"> </span><span class="nv">password</span><span class="o">=</span><span class="s1">&#39;123456&#39;</span>,<span class="w"> </span><span class="nv">first_name</span><span class="o">=</span><span class="s1">&#39;Reza&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>user1.save<span class="o">()</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Reza26&gt;<span class="o">]</span>&gt;
</pre></div>

<p>با متد <span class="en-text">save()</span> این تغییرات را توی دیتابیس ذخیره میکنیم.</p>
<hr />
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>user1
&lt;User:<span class="w"> </span>Reza26&gt;
&gt;&gt;&gt;<span class="w"> </span>user1.first_name
<span class="s1">&#39;Reza&#39;</span>
&gt;&gt;&gt;<span class="w"> </span>user1.username
<span class="s1">&#39;Reza26&#39;</span>
</pre></div>

<p>با صدا زدن کاربر نام کاربری آنرا نمایش میدهد
با صدا زدن فیلد مدنظر (مثله «first_name» و یا «username») مقدار آنرا از دیتابیس خوانده و به ما نشان میدهد.</p>
<hr />
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>user1.username<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Reza_01&#39;</span>
&gt;&gt;&gt;<span class="w"> </span>user1.save<span class="o">()</span>
&gt;&gt;&gt;<span class="w"> </span>user1.username
<span class="s1">&#39;Reza_01&#39;</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Reza_01&gt;<span class="o">]</span>&gt;
</pre></div>

<p>خب حالا در روش بالا مقدار فیلد «username» را تغییر داده (update کرده)  و در دیتابیس ذخیره کردیم</p>
<hr />
<p>با استفاده از متد <span class="en-text">delete()</span> داده را از دیتابیس پاک میکنیم</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Reza_01&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span>user1.delete<span class="o">()</span>
<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;auth.User&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">})</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;<span class="o">]</span>&gt;
</pre></div>

<hr />
<p>ایجاد داده در جدول دیتابیس ، با استفاده از متد <span class="en-text">create()</span></p>
<p>برای «user» بهتره از متد خاص خودش یعنی <span class="en-text">create_user()</span> استفاده کنیم (در این روش دیگر نیازی به متد <span class="en-text">save()</span> نیست):</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="c1"># structure</span>
<span class="n">class_name</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
<span class="c1"># example</span>
<span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create_user</span><span class="p">()</span>
</pre></div>

<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.create_user<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Mr_milad&#39;</span>,<span class="w"> </span><span class="nv">password</span><span class="o">=</span><span class="s1">&#39;M2546d&#39;</span>,<span class="w"> </span><span class="nv">first_name</span><span class="o">=</span><span class="s1">&#39;Milad&#39;</span>,<span class="w"> </span><span class="nv">last_name</span><span class="o">=</span><span class="s1">&#39;Javid&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Mr_milad&gt;<span class="o">]</span>&gt;
</pre></div>

<p>خب حالا بریم یک پست جدید ایجاد کنیم:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>Python&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.create<span class="o">(</span><span class="nv">author</span><span class="o">=</span>user2,<span class="w"> </span><span class="nv">title</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span>,<span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>post1
&lt;Post:<span class="w"> </span>Django&gt;
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>Python&gt;,<span class="w"> </span>&lt;Post:<span class="w"> </span>Django&gt;<span class="o">]</span>&gt;
</pre></div>

<p>چون فیلد (author) از نوع (ForeignKey) هست بهتره از (user) ایجاد کرده استفاده کنیم نه رشته / مابقی فیلد ها هم پر میکنیم.</p>
<hr />
<p><strong>متد <span class="en-text">get()</span>:</strong> برای دریافت یک (object) از جدول (منطبق با شرایطی که در دستور برایش مشخص میکنیم) استفاده میشه.</p>
<p>اگه شرطی که برایش مشخص میکنیم چند داده را شامل شود ارور میدهد(پس باید شرطی بیان کنیم که یک داده از جدول را شامل شود)</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.get<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>post
&lt;Post:<span class="w"> </span>Python&gt;
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.get<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Mr_milad&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>user
&lt;User:<span class="w"> </span>Mr_milad&gt;
</pre></div>

<hr />
<p>اگر هم آن چیزی که برایش مشخص میکنیم وجود نداشته باشه ارور میدهد</p>
<p>برای جلوگیری از ارور، میتوان از متد <span class="en-text">get_or_create()</span> استفاده کرد</p>
<p>با این متد اگه موردی، مطابق با شرایطی که مشخص میکنیم وجود نداشت آن آبجکت را ایجاد میکند.</p>
<p>یک تاپل برمیگرداند (object, created)</p>
<p>اولین مورد: آبجکت یافته شده و یا ایجاد شده میباشد و دومین مورد: (boolean) هست / اگه آبجکت را ایجاد کرده باشه (True) و چنانچه آبجکت از قبل وجود داشته باشه (False) را نمایش میده</p>
<p><strong>متد <span class="en-text">get_or_create()</span>:</strong></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.get_or_create<span class="o">(</span><span class="nv">author_id</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">title</span><span class="o">=</span><span class="s1">&#39;C language&#39;</span><span class="o">)</span>
<span class="o">(</span>&lt;Post:<span class="w"> </span>C<span class="w"> </span>language&gt;,<span class="w"> </span>True<span class="o">)</span>

&gt;&gt;&gt;<span class="w"> </span>Post.objects.get_or_create<span class="o">(</span><span class="nv">description</span><span class="o">=</span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span><span class="o">)</span>
<span class="o">(</span>&lt;Post:<span class="w"> </span>Django&gt;,<span class="w"> </span>False<span class="o">)</span>
</pre></div>

<hr />
<p><strong>متد <span class="en-text">filter()</span>:</strong> براساس شرایطی که برایش مشخص میکنیم، مجموعه داده های جدول را فیلتر و محدود میکند.</p>
<p>خروجی آن (کوئری ست) هستش.</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.filter<span class="o">(</span><span class="nv">title</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span><span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>Django&gt;<span class="o">]</span>&gt;
</pre></div>

<hr />
<p><strong>متد <span class="en-text">exclude()</span>:</strong> همه داده های جدول، بجز آنهایی که این شرط را دارند نمایش میدهد(داده هایی که این شرط را دارند نمایش داده نمیشوند)</p>
<p>خروجی آن (کوئری ست) هستش.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.exclude<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Ali&#39;</span><span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Mr_milad&gt;<span class="o">]</span>&gt;
</pre></div>

<hr />
<p>بااستفاده از متد <span class="en-text">update()</span> میتوان چند داده را ویرایش و آپدیت کرد.(برای مجموعه (کوئری ست) کاربرد داره)</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>new-post<span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.get<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>new-post.title<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;python programming language&#39;</span>
&gt;&gt;&gt;<span class="w"> </span>new-post.save<span class="o">()</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.exclude<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Ali&#39;</span><span class="o">)</span>.update<span class="o">(</span><span class="nv">first_name</span><span class="o">=</span><span class="s1">&#39;Mister1&#39;</span><span class="o">)</span>
</pre></div>

<hr />
<p>با استفاده از متد <span class="en-text">delete()</span> یک یا چند داده را از جدول پاک میکنیم.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Ali&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Mr_milad&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span><span class="nv">my_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.get<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Ali&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>my_user.delete<span class="o">()</span>
<span class="o">(</span><span class="m">1</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;auth.User&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">})</span>
&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Mr_milad&gt;<span class="o">]</span>&gt;
</pre></div>

<hr />
<p>دسترسی به فیلدهای مختلف یک داده از دیتابیس:</p>
<p>انتخاب یک داده 1. با متد <span class="en-text">get()</span> 2. استفاده از ایندکس برای (کوئری ست) و 3. حلقه روی (کوئری ست)</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.get<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">2</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span>p1.title
<span class="s1">&#39;Django&#39;</span>
&gt;&gt;&gt;<span class="w"> </span>p1.description
<span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span>

&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;User:<span class="w"> </span>Mahdi&gt;,<span class="w"> </span>&lt;User:<span class="w"> </span>Mr_milad&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span><span class="c1"># استفاده از ایندکس برای انتخاب یک مورد</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.all<span class="o">()</span>
&gt;&gt;&gt;<span class="w"> </span>users<span class="o">[</span><span class="m">1</span><span class="o">]</span>.last_name
<span class="s1">&#39;Javid&#39;</span>
&gt;&gt;&gt;<span class="w"> </span><span class="c1"># بجای استفاده از ایندکس میتوان روی (کوئری ست) حلقه زد و حالا داخل بدنه حلقه فیلد های مدنظر را صدا زد.(متد all() فراموش نشه)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="k">for</span><span class="w"> </span>user<span class="w"> </span><span class="k">in</span><span class="w"> </span>users:
...<span class="w">     </span>print<span class="o">(</span>user.username<span class="o">)</span>
...
Mahdi
Mr_milad
</pre></div>

<hr />
<p>نمایش تمام پست های یک کاربر:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">posts1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.filter<span class="o">(</span><span class="nv">author__username</span><span class="o">=</span><span class="s1">&#39;Mr_milad&#39;</span><span class="o">)</span>

&gt;&gt;&gt;<span class="w"> </span><span class="nv">posts2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.get<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Mr_milad&#39;</span><span class="o">)</span>.posts.all<span class="o">()</span>
</pre></div>

<p>نوشتن متد <span class="en-text">all()</span> مهمه.</p>
<p>عبارت <strong>posts</strong> قبل از متد <span class="en-text">all()</span> اسم (related_name) فیلد (author) هستش.</p>
<p>ما در این دو روش تمامی پست های یک کاربر را بدست آورده ایم./ حالا برای دسترسی به فیلدهای هر پست یا روی آن حلقه میزنیم یا با ایندکس، یک پست را انتخاب کرده و فیلد مدنظر را صدا میزنیم.</p>
<hr />
<p>استفاده از فیلدهای مدل در متدهایی مثله (<span class="en-text">get()</span>, <span class="en-text">filter()</span>, <span class="en-text">exclude()</span>):</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_01</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.get<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">2</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_02</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>post.objects.filter<span class="o">(</span><span class="nv">title</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_03</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>post.objects.exclude<span class="o">(</span><span class="nv">title</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="o">)</span>

&gt;&gt;&gt;<span class="w"> </span><span class="nv">user01</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.get<span class="o">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;Mahdi&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user02</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.filter<span class="o">(</span><span class="nv">first_name</span><span class="o">=</span><span class="s1">&#39;milad&#39;</span><span class="o">)</span>
</pre></div>

<p>در مثال های متعدد از فیلدها به صورت بالا استفاده کردیم حالا میخوایم وقتی دو جدول بهم متصل هستند، از فیلدهای جدول مقابل استفاده کنیم.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="c1"># structure</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.filter<span class="o">(</span>relation-field_name__field_name-in-connected-model<span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="c1"># examples</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_04</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Post.objects.get<span class="o">(</span><span class="nv">author__id</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_05</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>post.objects.filter<span class="o">(</span><span class="nv">author__first_name</span><span class="o">=</span><span class="s1">&#39;Mahdi&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">post_06</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>post.objects.exclude<span class="o">(</span><span class="nv">author__username</span><span class="o">=</span><span class="s1">&#39;Mr_milad&#39;</span><span class="o">)</span>

&gt;&gt;&gt;<span class="w"> </span><span class="c1"># structure</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.filter<span class="o">(</span>related_name__field_name<span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="c1"># examples</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user03</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.get<span class="o">(</span><span class="nv">user_posts__title</span><span class="o">=</span><span class="s1">&#39;python programming language&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">user04</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.exclude<span class="o">(</span><span class="nv">user_posts__title</span><span class="o">=</span><span class="s1">&#39;C language&#39;</span><span class="o">)</span>
</pre></div>

<hr />
<p><strong>متد <span class="en-text">order_by()</span>:</strong> کوئری ست را براساس یک فیلد مرتب سازی میکند.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span><span class="nv">sorted_users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.all<span class="o">()</span>.order_by<span class="o">(</span><span class="s1">&#39;first_name&#39;</span><span class="o">)</span>
&gt;&gt;&gt;<span class="w"> </span><span class="c1"># reverse</span>
&gt;&gt;&gt;<span class="w"> </span><span class="nv">sorted_users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>User.objects.all<span class="o">()</span>.order_by<span class="o">(</span><span class="s1">&#39;-first_name&#39;</span><span class="o">)</span>
</pre></div>

<hr />
<p>محدود کردن(limit) کوئری ست با slicing:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>User.objects.all<span class="o">()[</span><span class="m">2</span>:5<span class="o">]</span>
</pre></div>

<hr />
<p><strong>متد <span class="en-text">values()</span>:</strong> این متد مربوط به (کوئری ست) ها هستش. / یک (کوئری ست) شامل یک یا چند دیکشنری برمیگرداند</p>
<p>هر دیکشنری یک آبجکت از آن جدول میباشد. / آن دیکشنری تمام فیلدهای آن مدل (ستون های جدول) را نمایش میدهد.</p>
<p>کلید دیکشنری همان فیلدهای ما هستند.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>python<span class="w"> </span>programming<span class="w"> </span>language&gt;,<span class="w"> </span>&lt;Post:<span class="w"> </span>Django&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="s1">&#39;author_id&#39;</span>:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="s1">&#39;python programming language&#39;</span>,<span class="w"> </span><span class="s1">&#39;description&#39;</span>:<span class="w"> </span><span class="s1">&#39;pytjon is very usefull&#39;</span>,<span class="w"> </span><span class="s1">&#39;created&#39;</span>:<span class="w"> </span>datetime.datetime<span class="o">(</span><span class="m">2023</span>,<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="m">25</span>,<span class="w"> </span><span class="m">45</span>,<span class="w"> </span><span class="m">946455</span>,<span class="w"> </span><span class="nv">tzinfo</span><span class="o">=</span>datetime.timezone.utc<span class="o">)}</span>,
<span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="s1">&#39;author_id&#39;</span>:<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="s1">&#39;Django&#39;</span>,<span class="w"> </span><span class="s1">&#39;description&#39;</span>:<span class="w"> </span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span>,<span class="w"> </span><span class="s1">&#39;created&#39;</span>:<span class="w"> </span>datetime.datetime<span class="o">(</span><span class="m">2023</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="m">17</span>,<span class="w"> </span><span class="m">18</span>,<span class="w"> </span><span class="m">45</span>,<span class="w"> </span><span class="m">856455</span>,<span class="w"> </span><span class="nv">tzinfo</span><span class="o">=</span>datetime.timezone.utc<span class="o">)}]</span>&gt;
</pre></div>

<p>خب حالا اگه ما فقط چند فیلد را بجای کل فیلدها بخواهیم کافیه آن فیلدها را برایش مشخص کنیم:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>python<span class="w"> </span>programming<span class="w"> </span>language&gt;,<span class="w"> </span>&lt;Post:<span class="w"> </span>Django&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values<span class="o">(</span><span class="s1">&#39;id&#39;</span>,<span class="w"> </span><span class="s1">&#39;title&#39;</span><span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="s1">&#39;python programming language&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="s1">&#39;Django&#39;</span><span class="o">}]</span>&gt;
</pre></div>

<hr />
<p><strong>متد <span class="en-text">values_list()</span>:</strong> این متد مشابه (values()) میباشد، با این تفاوت که بجای دیکشنری؛ تاپل برمیگرداند.</p>
<p>هر تاپل شامل مقدار فیلد ها میباشد.</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>&lt;Post:<span class="w"> </span>python<span class="w"> </span>programming<span class="w"> </span>language&gt;,<span class="w"> </span>&lt;Post:<span class="w"> </span>Django&gt;<span class="o">]</span>&gt;
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values_list<span class="o">()</span>
&lt;QuerySet<span class="w"> </span><span class="o">[(</span><span class="m">1</span>,<span class="w"> </span><span class="m">1</span>,<span class="w"> </span><span class="s1">&#39;python programming language&#39;</span>,<span class="w"> </span><span class="s1">&#39;pytjon is very usefull&#39;</span>,<span class="w"> </span>datetime.datetime<span class="o">(</span><span class="m">2023</span>,<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">15</span>,<span class="w"> </span><span class="m">25</span>,<span class="w"> </span><span class="m">45</span>,<span class="w"> </span><span class="m">946455</span>,<span class="w"> </span><span class="nv">tzinfo</span><span class="o">=</span>datetime.timezone.utc<span class="o">))</span>,
<span class="o">(</span><span class="m">2</span>,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="s1">&#39;Django&#39;</span>,<span class="w"> </span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span>,<span class="w"> </span>datetime.datetime<span class="o">(</span><span class="m">2023</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="m">17</span>,<span class="w"> </span><span class="m">18</span>,<span class="w"> </span><span class="m">45</span>,<span class="w"> </span><span class="m">856455</span>,<span class="w"> </span><span class="nv">tzinfo</span><span class="o">=</span>datetime.timezone.utc<span class="o">))]</span>&gt;
</pre></div>

<p>کاربرد اصلی این متد برای نمایش یک فیلد و بعضی مواقع چند فیلد میباشد:</p>
<p><code>shell:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">shell</span>
        </div>
    <pre><span></span>&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values_list<span class="o">(</span><span class="s1">&#39;title&#39;</span><span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[(</span><span class="s1">&#39;python programming language&#39;</span>,<span class="o">)</span>,<span class="w"> </span><span class="o">(</span><span class="s1">&#39;Django&#39;</span>,<span class="o">)]</span>&gt;

&gt;&gt;&gt;<span class="w"> </span><span class="c1"># for better design (use flat=True)</span>
&gt;&gt;&gt;Post.objects.all<span class="o">()</span>.values_list<span class="o">(</span><span class="s1">&#39;title&#39;</span>,<span class="w"> </span><span class="nv">flat</span><span class="o">=</span>True<span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span><span class="s1">&#39;python programming language&#39;</span>,<span class="w"> </span><span class="s1">&#39;Django&#39;</span><span class="o">]</span>&gt;

&gt;&gt;&gt;<span class="w"> </span><span class="c1"># use multiple fields</span>

&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values_list<span class="o">(</span><span class="s1">&#39;id&#39;</span>,<span class="w"> </span><span class="s1">&#39;description&#39;</span><span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[(</span><span class="m">1</span>,<span class="w"> </span><span class="s1">&#39;pytjon is very usefull&#39;</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span><span class="m">2</span>,<span class="w"> </span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span><span class="o">)]</span>&gt;

&gt;&gt;&gt;<span class="w"> </span><span class="c1"># for better design(use named=True)</span>
&gt;&gt;&gt;<span class="w"> </span>Post.objects.all<span class="o">()</span>.values_list<span class="o">(</span><span class="s1">&#39;id&#39;</span>,<span class="w"> </span><span class="s1">&#39;description&#39;</span>,<span class="w"> </span><span class="nv">named</span><span class="o">=</span>True<span class="o">)</span>
&lt;QuerySet<span class="w"> </span><span class="o">[</span>Row<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s1">&#39;pytjon is very usefull&#39;</span><span class="o">)</span>,<span class="w"> </span>Row<span class="o">(</span><span class="nv">id</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">description</span><span class="o">=</span><span class="s1">&#39;Django is a free and open source web-based software framework&#39;</span><span class="o">)]</span>&gt;
</pre></div>

<hr />
<h3 id="skht-manager-sfrshy-bry-mdl">ساخت manager سفارشی برای مدل</h3>
<p>هر مدل دارای (manager) پیشفرض (objects) میباشد.</p>
<p>و با استفاده از آن تمام آبجکت های ایجاد شده از آن مدل را شامل میشود(تمامی داده های آن مدل در دیتابیس)</p>
<p>حالا میخواهیم (manager سفارشی) خود را ایجاد کنیم.</p>
<p>خارج از کلاس مدل خود (در مثال ما کلاس Post) ، یک کلاس ایجاد میکنیم که از (models.Manager) ارث بری میکنه.</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">Field_NameManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="c1"># ...</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="c1"># .</span>
    <span class="c1"># .</span>
</pre></div>

<p>حالا داخل آن کلاس متد <span class="en-text">get_queryset()</span> را <strong>override</strong> میکنیم</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">Field_NameManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>

<p>داخل پرانتز متد <span class="en-text">filter()</span> با تعیین فیلد یا فیلدهایی از مدل، (کوئری ست) خود را فیلتر میکنیم(محدود میکنیم)</p>
<p>مثلا پست هایی را میخواهیم که وضعیت (publish) داشته باشند/ داخل متد <span class="en-text">filter()</span> مشخص میکنیم آنهایی که فیلد (status) برابره با (PUBLISHED) رو نمایش بده.</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="k">class</span> <span class="nc">PublishedManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Post</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">PUBLISHED</span><span class="p">)</span>
</pre></div>

<h4>حالا باید این (manager) را به کلاس مدل خود (Post) معرفی کنیم</h4>
<p>داخل کلاس مدل یک متغیر بنام (objects) نوشته و برایش مقدار (models.Manager()) را مشخص میکنیم.</p>
<p>حالا یک متغیر برای (manager سفارشی) نوشته و برایش (اسم کلاس (manager) که ایجاد کردیم) را مشخص میکنیم</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">objects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span>
    <span class="n">published</span> <span class="o">=</span> <span class="n">PublishedManager</span><span class="p">()</span>
</pre></div>

<p>خب همه اینها را در کد فایل models.py ببینیم (کد جدید مابین خط چین ها میباشد).</p>
<p><code>app directory/models.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>


<span class="c1"># -------------------------------------------------------------------------</span>
<span class="c1"># Managers</span>
<span class="k">class</span> <span class="nc">PublishedManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">Post</span><span class="o">.</span><span class="n">Status</span><span class="o">.</span><span class="n">PUBLISHED</span><span class="p">)</span>
<span class="c1"># -------------------------------------------------------------------------</span>


<span class="k">class</span> <span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
        <span class="n">DRAFT</span> <span class="o">=</span> <span class="s1">&#39;DF&#39;</span><span class="p">,</span> <span class="s1">&#39;Draft&#39;</span>
        <span class="n">PUBLISHED</span> <span class="o">=</span> <span class="s1">&#39;PB&#39;</span><span class="p">,</span> <span class="s1">&#39;Published&#39;</span>
        <span class="n">REJECTED</span> <span class="o">=</span> <span class="s1">&#39;RJ&#39;</span><span class="p">,</span> <span class="s1">&#39;Rejected&#39;</span>

    <span class="c1"># field for the selected mode (using the top class)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">choices</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Status</span><span class="o">.</span><span class="n">DRAFT</span><span class="p">)</span>

    <span class="c1"># Relational field(Many To One)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;user_posts&quot;</span><span class="p">)</span>

    <span class="c1"># title of the post</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>
    <span class="c1"># post description</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="c1"># The main part of the address is after the domain name</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

    <span class="c1"># Date</span>
    <span class="c1"># post publish date</span>
    <span class="n">publish</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="c1"># post creation date</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># post update date</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">()</span>
    <span class="n">published</span> <span class="o">=</span> <span class="n">PublishedManager</span><span class="p">()</span>
    <span class="c1"># -------------------------------------------------------------------------</span>

    <span class="c1"># To sort the table</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="c1"># Sort by</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">]</span> <span class="c1"># (-) is used to reverse the sort. =&gt; sort by latest post</span>
        <span class="c1"># Indexing by</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-publish&#39;</span><span class="p">])</span>
            <span class="p">]</span>


    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</pre></div>

<hr />
<h3 id="yjd-url-hy-plykhyshn-blg">ایجاد URL های اپلیکیشن بلاگ</h3>
<p>برای مدیریت راحت تر (url) های هر اپلیکیشن (app) توی دایرکتوری هر اپ، یک فایل (urls.py) ایجاد کرده و (url)های مربوط به آن اپ را داخلش مینویسیم.</p>
<hr />
<p>توی فایل (urls.py) اپ، (path) و (views) را ایمپورت میکنیم.</p>
<p><code>app directory/urls.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>
</pre></div>

<hr />
<ol>
<li>
<p>توی فایل urls.py هر اپ یک متغیر بنام (app_name) نوشته و برایش اسم همان اپ را مشخص میکنیم.</p>
</li>
<li>
<p>حالا یک متغیر بنام (urlpatterns) ایجاد میکنیم، (url)های اپ داخل لیست آن قرار میگیرند.</p>
</li>
</ol>
<hr />
<h4>تعریف url</h4>
<p>توی لیست (urlpatterns) به صورت زیر عمل میکنیم:</p>
<p><code>app directory/urls.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;page_url/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">function_name</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;function_name&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>

<p>داخل پرانتز (path):
مورد اول =&gt; (url) آن صفحه در وبسایت میباشد(به صورت رشته نوشته میشود)
مورد دوم =&gt;  (view) نوشته شده برای آن (url) میباشد
مورد سوم =&gt; یک اسم برای (url) مشخص میکنیم(همنام با اسم (view))</p>
<p><code>app directory/urls.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>


<span class="n">app_name</span> <span class="o">=</span> <span class="s1">&#39;blog&#39;</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># URL For index page</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>
    <span class="c1"># URL For Post-Detail</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;posts/&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;post_list&#39;</span><span class="p">),</span>
    <span class="c1"># URL For Post-Detail</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;posts/&lt;int:id&gt;&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">post_detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;post_detail&quot;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>

<p>توی url متغیر را به صورت &lt;name&gt; یا &lt;data_type:name&gt; بیان میکنیم</p>
<p>حالا وقتی این (url) را وارد میکنیم متغیر به (view) ارسال میشه</p>
<p>برای استفاده از آن متغیر باید اسم متغیر را به عنوان آرگومان به تابع (view)  بدهیم.</p>
<hr />
<h4>کاربرد (app_name) و (name) در فایل (url)</h4>
<p>اگه خواستیم از (url) که ایجاد کرده ایم در جایی استفاده کنیم بجای نوشتن آن آدرس طولانی به صورت زیر عمل میکنیم:</p>
<p>app_name: (name in path)</p>
<p>blog: post_list</p>
<hr />
<p>الآن این (url)ها کار نمیکنند ما باید یکسری تغییرات توی فایل (urls.py) پروژه نه دایرکتوری اپ ایجاد کنیم (باید فایل urls.py اپ را بهش معرفی کنیم)</p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="n">path</span><span class="p">(</span><span class="s1">&#39;خالی یا یک آدرس&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;آدرس فایل url اپ&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;اسم اپ&quot;</span><span class="p">))</span>
</pre></div>

<p>برای درک بیشتر به کد زیر توجه کنید.</p>
<p><code>project directory/urls.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span><span class="p">,</span> <span class="n">include</span>


<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>

    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;url before the app url/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;app_name.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;app_name&quot;</span><span class="p">))</span>
    <span class="c1"># example</span>
    <span class="n">path</span><span class="p">(</span><span class="s1">&#39;weblog/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;blog.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;blog&quot;</span><span class="p">))</span>
<span class="p">]</span>
</pre></div>

<hr />
<h3 id="yjd-view-hy-plykhyshn-blg">ایجاد view های اپلیکیشن بلاگ</h3>
<p>داخل فایل (views.py) مدل های خود را (جهت ارتباط با دیتابیس: اعمال تغییرات و یا خواندن داده ها) ایمپورت میکنیم</p>
<p>view ها به صورت تابع تعریف میشوند که دارای آرگومان اجباری (request) هستند.</p>
<p>داخل بدنه تابع هرکاری که لازم داریم را انجام میدهیم</p>
<p>حالا اگه قرار باشه یک تمپلیت را نمایش دهیم از (render) استفاده میکنیم که باید ایمپورت شود.</p>
<p>برای تابع (render) دو مورد (request) و (path/template_name) اجباری هستند.</p>
<p>برای ارسال داده از (view) به (template) از (context) استفاده میکنیم</p>
<hr />
<p>تمپلیت های ما در دایرکتوری (templates که در اپ قرار دارد) پوشه بندی میشوند آدرس تمپلیت های ما از داخل دایرکتوری templates شروع میشوند</p>
<p>'blog/post_detail.html'</p>
<p>دایرکتوری blog داخل دایرکتوری templates قرار دارد</p>
<p><code>app directory/views.py</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">python</span>
        </div>
    <pre><span></span><span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">Http404</span>


<span class="c1"># Views Of Home Page.</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>

<span class="c1"># Views Of All Posts.</span>
<span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">published</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;posts&#39;</span><span class="p">:</span><span class="n">posts</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;blog/post_list.html&#39;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

<span class="c1"># Views Of Post-Details.</span>
<span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">post</span> <span class="o">=</span> <span class="n">Post</span><span class="o">.</span><span class="n">published</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Http404</span><span class="p">(</span><span class="s2">&quot;No Post Found&quot;</span><span class="p">)</span>

    <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;post&#39;</span><span class="p">:</span><span class="n">post</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;blog/post_detail.html&quot;</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>

<p>بااستفاده از تابع (HttpResponse) یک متن رو نمایش میدهیم مثلا در بالا عبارت ('index') رو نمایش میدهد</p>
<p>در تابع (post_list) همه پست های منتشر شده را با دستور (ORM) از دیتابیس گرفته و توی متغیر (posts) ذخیره کرده ایم.</p>
<p>بااستفاده از (context) محتوای متغیر (posts) را با اسم (posts قابل استفاده در تمپلیت) به تمپلیت ارسال کرده ایم.</p>
<p>توی (post_detail) با دریافت (id) از (url) و استفاده از آن پست مربوطه را میابیم/ حالا اگه آن پست نباشد با تابع (Http404) ارور 404 با یک پیغام دلخواه نمایش داده میشود.</p>
<hr />
<h3 id="yjd-base-template">ایجاد base template</h3>
<p>توی قالب تمپلیت وبسایت یک بخش هایی مثل header, footer, navigation هستند که در همه صفحات تکرار میشوند برای جلوگیری از این تکرارها از تمپلیت (base template) استفاده کرده و آن بخش های تکراری را داخلش مینویسیم.</p>
<p>ساختار کلی تمپلیت تگ ها{%  %} و ساختار متغیرهای تمپلیت {{  }} میباشد</p>
<h4>ساختار base template</h4>
<p><code>app directory/templates/parent/base.html</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">jinja</span>
        </div>
    <pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span>
<span class="x">&lt;!doctype html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span>
<span class="x">    &lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;link rel=&quot;icon&quot; type=&quot;image/ico&quot; href=&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;icon/Django03.ico&#39;</span> <span class="cp">%}</span><span class="x">&quot;&gt;</span>
<span class="x">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href= &quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;css/base.css&#39;</span> <span class="cp">%}</span><span class="x">&quot;&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;partials/header.html&#39;</span> <span class="cp">%}</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;partials/navigation.html&#39;</span> <span class="cp">%}</span>
<span class="x">    &lt;div class=&quot;container&quot;&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">&#39;partials/footer.html&#39;</span> <span class="cp">%}</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>

<p>فایل هایی مثله (images, CSS, JS) داخل دایرکتوری (static) قرار داده میشوند (دایرکتوری static را داخل دایرکتوری اپ ایجاد کنید)</p>
<p>برای استفاده از فایل های داخل دایرکتوری (static) اول باید آن را (load) کنیم این کار را با تمپلیت تگ {% load static %} انجام می دهیم</p>
<hr />
<p>تمپلیت تگ (block):</p>
<p>{% block name %}{% endblock %}</p>
<p>با استفاده از این ساختار میتوان توی قالب هایی که از (base.html) ارث بری میکنند مطلب مدنظر خود را جایگزین کرد.</p>
<p>هر صفحه ای (title) خود را دارد واسه همین برای تگ (title) از تمپلیت تگ (block) استفاده میکنیم تا در هر صفحه ای عنوان منحصر به فرد خود را بنویسیم</p>
<hr />
<p>تمپلیت های header, navigation, footer را جداگانه مینویسم حالا با استفاده از تمپلیت تگ {% include %} آنها را وارد تمپلیت (base.html) میکنیم</p>
<hr />
<h3 id="yjd-template-hy-lyst-w-jzyyt">ایجاد template های لیست و جزئیات</h3>
<p>توی دایرکتوری (blog) فایل (html) را ایجاد میکنیم(blog داخل دایرکتوری templates قرار داره)</p>
<p>خب حالا برای اینکه تمپلیت ما (post_list.html ویا post_detail.html) از تمپلیت (base.html) ارث بری بکنه از تمپلیت تگ {% extends 'parent/base.html' %} استفاده میکنیم</p>
<p>حالا برای پرکردن (block)هایی که در تمپلیت پایه ایجاد کرده ایم:</p>
<p>از آن تمپلیت تگ block استفاده کرده و مابین تگ متن دلخواه خود را می نویسیم</p>
<p>بخش فرانت اند تمپلیت دلخواه هست و هرکس هر طور خواست میتونه آنرا بنویسه اینجا فقط یک مثال زدیم و چگونگی استفاده از block ها و تمپلیت تگ ها بیان شده است.</p>
<h4>post_list.html</h4>
<p><code>app directory/templates/blog/post_list.html</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">jinja</span>
        </div>
    <pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;parent/base.html&#39;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">load</span> <span class="nv">static</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"> Post Lists </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
<span class="x">    &lt;link rel=&quot;stylesheet&quot; href=&quot;</span><span class="cp">{%</span> <span class="k">static</span> <span class="s1">&#39;css/style.css&#39;</span> <span class="cp">%}</span><span class="x">&quot;&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
<span class="x">    &lt;div class=&quot;container&quot;&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="k">in</span> <span class="nv">posts</span> <span class="cp">%}</span>
<span class="x">            &lt;div class=&quot;post&quot;&gt;</span>
<span class="x">                &lt;a href=&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="nv">blog</span><span class="o">:</span><span class="nv">post_detil</span> <span class="nv">post.id</span> <span class="cp">%}</span><span class="x">&quot;&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;</span>
<span class="x">                &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">post.description</span><span class="o">|</span><span class="nf">truncatewords</span><span class="o">:</span><span class="m">5</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>

<h4>post_detail.html</h4>
<p><code>app directory/templates/blog/post_detail.html</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">jinja</span>
        </div>
    <pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;parent/base.html&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
<span class="x">    &lt;h3&gt;Author: </span><span class="cp">{{</span> <span class="nv">post.author</span> <span class="cp">}}</span><span class="x">&lt;/h3&gt;</span>
<span class="x">    &lt;br&gt;&lt;br&gt;</span>
<span class="x">    &lt;h2&gt;Title: </span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x">&lt;/h2&gt;</span>
<span class="x">    &lt;h3 &gt;description:&lt;/h3&gt;</span>
<span class="x">    &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">post.description</span> <span class="o">|</span> <span class="nf">linebreaks</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="x">    &lt;p&gt;</span><span class="cp">{{</span> <span class="nv">post.publish</span> <span class="cp">}}</span><span class="x">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>

<p>برای استفاده از حلقه (for) توی تمپلیت از تمپلیت تگ آن استفاده میکنیم:</p>
<p><code>jinja:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">jinja</span>
        </div>
    <pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="k">in</span> <span class="nv">posts</span> <span class="cp">%}</span>
<span class="x">    بدنه حلقه</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>

<p>با استفاده از تمپلیت تگ (url) بجای آدرس طولانی، میتوان خیلی ساده به آنها دسترسی داشت.</p>
<p><code>jinja:</code></p>
<div class="code-box">
        <div class="code-info">
            <button class="copy-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" class="icon-sm"><path fill="currentColor" fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" clip-rule="evenodd"></path></svg>
                <span>Copy code</span>
            </button>
            <span class="language">jinja</span>
        </div>
    <pre><span></span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;app_name:name in path&#39;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;blog:post_list&#39;</span> <span class="cp">%}</span>
</pre></div>

<p>تمپلیت فیلتر (|truncatewords:number): با عددی که جلویش می نویسیم، تعیین میکنیم تا چند تا از کلمات آن متن را نشان بدهد و اگر باز کلمه داشت بجای آنها سه نقطه میذاره.</p>
<p>تمپلیت فیلتر (linebreaks): اگه متنی که نوشتیم در خطوط مختلف نوشته شده باشه توی صفحه سایت هم اون خطوط را جداگانه مینویسه.</p>
            <a href="https://github.com/virapy/django-booklet/edit/seasons-source/season-02.md" target="_blank" class="edit-icon">
                <i class="fa-solid fa-pen-to-square"></i>
            </a>
        </div>
    </div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://virapy.github.io/assets/JS/Django-seasons.js"></script>
<script src="https://virapy.github.io/assets/JS/copy-icon.js"></script>
<script src="https://virapy.github.io/assets/JS/Footer-Copyright.js"></script>
</body>
</html>
    